<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>敌空力量分析</title>
	
		<script src="js/jquery-1.9.1.min.js"></script>


	</head>
	<body>
		<ul>
  <li>list item 1</li>
  <li>list item 2
    <ul>
      <li>list item 2-a</li>
      <li>list item 2-b</li>
    </ul>
  </li>
  <li>list item 3 <ul>
      <li>list item 2-a</li>
      <li>list item 2-b</li>
    </ul></li>
  <li>list item 4</li>
</ul>
	
	<script type="text/javascript">
	$(function(){
		$("div ul li input[type=checkbox]").click(function(){
			var flag = true;
			if(this.checked){
				$(this).parents("li").eq(0).find("ul li input[type=checkbox]").each(function(i,v){
					$(v).prop("checked",true);
				});
				
				var ps = $(this).parents("li");
				ps.each(function(i,v){
					$(v).parent().find("input[type=checkbox]").each(function(j,k){
						if(!k.checked){
							flag = false;
						}
					});
					if(flag){
						$(v).parents("li").eq(0).find("input[type=checkbox]:first").prop("checked",true);
					}
				});
			}else{
				$(this).parents("li").eq(0).find("ul li input[type=checkbox]").each(function(i,v){
					$(v).prop("checked",false);
				});
				
				var lip = $(this).parents("li");
				lip.each(function(i,v){
					$(v).find("input[type=checkbox]:first").prop("checked",false);
				});
			}
		});
	});
	</script>
	</body>
</html>